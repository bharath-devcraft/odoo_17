<odoo>
    <data>      
       <record id="m_form_v_cm_country_state_form" model="ir.ui.view">
            <field name="name">State</field>
            <field name="model">res.country.state</field>
            <field name="arch" type="xml">
            <form string="State">		    
				<header>
					<button string="Approve" 
						class="btn btn-success" 
						icon="fa-thumbs-up" 
						type="object" 
						name="entry_approve" 
						invisible = "status not in ('draft','editable')" 
						confirm="Are you sure to proceed ?"/>
					<button string="Set To Draft"
						class="btn btn-primary"
						type="object" name="entry_draft"
						invisible = "status != 'active'" 
						confirm="Are you sure to proceed ?"/>
					<button string="Inactive"
						class="btn btn-danger"
						icon="fa-thumbs-down" 
						type="object" name="entry_inactive" 
						invisible = "status != 'active'" 
						confirm="Are you sure to proceed ?"/>
					<field name="status" widget="statusbar" style="width:700px;"/>                
				</header>                   
				<sheet>
				<group>
					<group>
						<label for="name" class="name-lable"/>
						<div>
							<field name="name" class="name-value" widget="no_special_char" required="1" readonly = "status in ('active','inactive')"/>							
						</div>	
						<field name="country_id" required="1" readonly = "status in ('active','inactive')" domain = "[('status','=','active')]" options="{'no_create': True, 'no_open': True}"/>				
					</group>
					<group>
						<field name="code" widget="upper_case" required="1" readonly = "status in ('active','inactive')"/>
                        <field name="status" readonly = "1" invisible="1"/>		
					</group>
				</group>
				<notebook>            
					<page string="Inactive Remarks" invisible = "status not in ('active','inactive')">
						<field name="inactive_remark" readonly = "status != 'active'" nolabel="1"/>
					</page>
					<page string="Entry Info">
						<group>
							<group>
								<field name="company_id"/>
								<field name="active_trans"/>
								<field name="active_rpt"/>
							</group>
							<group>
								<field name="active" widget="boolean_toggle"/>
								<field name="entry_mode"/>
							</group>
						</group>
						<group>
							<group>
								<field name="user_id" widget="many2one_avatar_user" />
								<field name="ap_rej_user_id" string="Approved By" widget="many2one_avatar_user" invisible = "status not in ('active','inactive')"/>
								<field name="inactive_user_id" widget="many2one_avatar_user" invisible = "status != 'inactive'" />
								<field name="update_user_id" widget="many2one_avatar_user"/>
							</group>
							<group>
								<field name="crt_date"/>
								<field name="ap_rej_date" string="Approved Date" invisible = "status not in ('active','inactive')"/>
								<field name="inactive_date" invisible = "status != 'inactive'"/>
								<field name="update_date"/>
							</group>
						</group>
					</page>
				</notebook>		    
                <group>
					<field name="note"  placeholder="Write your notes here."/>
				</group>
				<div class="oe_chatter">
					<field name="message_ids"/>
				</div>  
				</sheet>
                </form>
              </field>
        </record>
       
        <record id="cm_country_state_tree_js" model="ir.ui.view">
            <field name="name">Dashboard View</field>
            <field name="model">res.country.state</field>
            <field name="priority" eval="10"/>
            <field name="arch" type="xml">
                <tree string="State" js_class="cm_country_state_list"
                        decoration-info="status == 'draft'" 
                        decoration-success = "status == 'editable'"
                        decoration-bf = "status in ('active','draft')"
                        decoration-primary = "status == 'inactive'">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="country_id"/>
                    <field name="status" widget="badge" decoration-info = "status == 'draft'"
                        decoration-success = "status == 'editable'"
                        decoration-bf = "status == 'active'"
                        decoration-primary = "status == 'inactive'"/>
                    <field name="ap_rej_user_id" string="Approved By"/>
                    <field name="crt_date"/>
                </tree>
            </field>
        </record>

        <record id="cm_country_state_tree" model="ir.ui.view">
            <field name="name">Tree View</field>
            <field name="model">res.country.state</field>
            <field name="priority" eval="1"/>
            <field name="arch" type="xml">
                <tree string="State"
                        decoration-info="status == 'draft'" 
                        decoration-success = "status == 'editable'"
                        decoration-bf = "status in ('active','draft')"
                        decoration-primary = "status == 'inactive'">
                    <field name="name"/>
                    <field name="code"/>
                    <field name="country_id"/>
                    <field name="status" widget="badge" decoration-info = "status == 'draft'"
                        decoration-success = "status == 'editable'"
                        decoration-bf = "status == 'active'"
                        decoration-primary = "status == 'inactive'"/>
                    <field name="ap_rej_user_id" string="Approved By"/>
                    <field name="crt_date"/>
                </tree>
            </field>
        </record>

        
        <record id="cm_country_state_search" model="ir.ui.view">
            <field name="name">Search View</field>
            <field name="model">res.country.state</field>
            <field name="arch" type="xml">
                <search string="State">
                    <field name="name" string="State Name" filter_domain="[('name','ilike',self)]"/>
                    <field name="code" string="State Code" filter_domain="[('code','ilike',self)]"/>
                    <field name="country_id" string="Country" filter_domain="[('country_id','ilike',self)]"/>
                    
                    <filter name="my_master" string="My Master" domain="[('user_id', '=', uid)]"/> 
                    <filter name="Draft" domain="[('status', '=', 'draft')]"/>
                    <filter name="Editable" domain="[('status', '=', 'editable')]"/>
                    <filter name="Active" domain="[('status', '=', 'active')]"/>
                    <filter name="Inactive" domain="[('status', '=', 'inactive')]"/>
                    <filter name="My Draft" string="My Draft" domain="[('user_id', '=', uid),('status', '=', 'draft')]"/>
                    <filter name="My Editable" string="My Editable" domain="[('user_id', '=', uid),('status', '=', 'editable')]"/>
                    <filter name="My Active" string="My Active" domain="[('user_id', '=', uid),('status', '=', 'active')]"/>
                    <filter name="My Inactive" string="My Inactive" domain="[('user_id', '=', uid),('status', '=', 'inactive')]"/>
                    <filter name="Hidden" domain="[('active', '=', False)]"/>
                    
                    <group expand="0" string="Group By">
                        <filter string="Country" name="country_id" domain="[]" context="{'group_by': 'country_id'}"/>
                        <filter string="Status" name="status" domain="[]" context="{'group_by': 'status'}"/>
                        <filter string="Approved By" name="status" domain="[]" context="{'group_by': 'ap_rej_user_id'}"/>
                        <filter string="Approved Date" name="status" domain="[]" context="{'group_by': 'ap_rej_date'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="cm_country_state_win_action" model="ir.actions.act_window">
            <field name="name">State</field>
            <field name="res_model">res.country.state</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="view_id" ref="cm_country_state_tree_js"/>
            <field name="search_view_id" ref="cm_country_state_search"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">No state record found. Let's create one!</p>
            </field>
        </record>


		<menuitem name="State" id="cm_country_state_act_menu" parent="cm_customer.cm_crm_master_m_parent" action="cm_country_state_win_action" sequence="50"/>
		
		

    </data>
</odoo>
